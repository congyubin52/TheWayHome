<script th:fragment="js" th:inline="javascript" type="text/javascript">

    $(document).ready(function () {
        console.log("DOCUMENT READY!!");

        init_events();

    });

    function init_events() {
        // 관리자 승인 처리
        $(document).on('click', '#search_admin_list tbody td.btn_approval', function(e) {
            console.log("btn_approval CLICK HANDLER");

            confirm('상태를 변경하시겠습니까?')

            let no = $(this).parent().attr('id');
            ajax_approval_confirm(no);

        });

    /*
     * AJAX START
     */
    //관리자 승인 처리 ajax
        function ajax_approval_confirm(a_m_no) {
            console.log('ajax_approval_confirm() CALLED!!');

            let formdata = new FormData();
            formdata.append("a_m_no", a_m_no);

            $.ajax({
                url: '/admin/member/member_approval_confirm',
                method: 'POST',
                processData: false,
                contentType: false,
                data: formdata,
                success: function (data) {
                    console.log('AJAX SUCCESS - ajax_approval_confirm()');
                    if (data.result == 0) {
                        $("#" + a_m_no + ' td.btn_approval a.approval').text("승인대기");
                        $("#" + a_m_no + ' td.btn_approval div.approval')
                            .css("background-color", "#6c757d")
                            .css("color", "#6c757d");
                    } else {
                        $("#" + a_m_no + ' td.btn_approval a.approval').text("승인완료");
                        $("#" + a_m_no + ' td.btn_approval div.approval')
                            .css("background-color", "#28a745")
                            .css("color", "#fff");
                    }
                },
                error: function (data) {
                    console.log('AJAX ERROR - ajax_approval_confirm()');
                    alert('문제가 발생했습니다. 다시 시도해주세요.');
                }
            });
        }

    }
    /*
     * AJAX END
     */

</script>